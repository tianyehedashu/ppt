<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>HTML Fragment 高级演示</title>
    <style>
        .fragment-demo {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            padding: 20px;
            max-width: 900px;
            margin: 0 auto;
        }
        
        .step-container {
            margin: 30px 0;
            padding: 20px;
            border-radius: 10px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .code-evolution {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            border-left: 4px solid #007bff;
        }
        
        .code-evolution h4 {
            color: #333;
            margin: 0 0 15px 0;
        }
        
        .code-evolution pre {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 0;
        }
        
        .timeline {
            position: relative;
            padding: 20px 0;
        }
        
        .timeline::before {
            content: '';
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 2px;
            background: #667eea;
            transform: translateX(-50%);
        }
        
        .timeline-item {
            position: relative;
            margin: 30px 0;
            padding: 0 30px;
        }
        
        .timeline-item::before {
            content: '';
            position: absolute;
            left: 50%;
            top: 20px;
            width: 12px;
            height: 12px;
            background: #667eea;
            border-radius: 50%;
            transform: translateX(-50%);
        }
        
        .timeline-content {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            width: 45%;
        }
        
        .timeline-item:nth-child(odd) .timeline-content {
            margin-left: 0;
        }
        
        .timeline-item:nth-child(even) .timeline-content {
            margin-left: 55%;
        }
        
        .feature-showcase {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .feature-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
        }
        
        .feature-icon {
            font-size: 3em;
            margin-bottom: 15px;
            display: block;
        }
        
        .interactive-chart {
            background: linear-gradient(45deg, #1a202c, #2d3748);
            border-radius: 10px;
            padding: 30px;
            margin: 20px 0;
            color: white;
        }
        
        .chart-bar {
            display: flex;
            align-items: center;
            margin: 15px 0;
        }
        
        .chart-label {
            width: 100px;
            font-weight: 500;
        }
        
        .chart-progress {
            flex: 1;
            height: 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            margin: 0 15px;
            position: relative;
            overflow: hidden;
        }
        
        .chart-fill {
            height: 100%;
            border-radius: 10px;
            transition: width 1s ease;
            background: linear-gradient(90deg, #4facfe 0%, #00f2fe 100%);
        }
        
        .chart-value {
            font-weight: bold;
            color: #4facfe;
        }
    </style>
</head>
<body>
    <div class="fragment-demo">
        <div class="step-container fragment">
            <h1>🚀 HTML Fragment 高级演示</h1>
            <p>结合JavaScript实现复杂的分步展示效果</p>
        </div>
        
        <div class="fragment">
            <h2>📈 项目开发时间线</h2>
            <div class="timeline">
                <div class="timeline-item fragment" data-fragment-index="1">
                    <div class="timeline-content">
                        <h3>🎯 需求分析</h3>
                        <p>明确项目目标和技术要求</p>
                        <small>第1周</small>
                    </div>
                </div>
                
                <div class="timeline-item fragment" data-fragment-index="2">
                    <div class="timeline-content">
                        <h3>🏗️ 架构设计</h3>
                        <p>设计系统架构和技术选型</p>
                        <small>第2-3周</small>
                    </div>
                </div>
                
                <div class="timeline-item fragment" data-fragment-index="3">
                    <div class="timeline-content">
                        <h3>💻 开发实现</h3>
                        <p>核心功能开发和模块集成</p>
                        <small>第4-8周</small>
                    </div>
                </div>
                
                <div class="timeline-item fragment" data-fragment-index="4">
                    <div class="timeline-content">
                        <h3>🧪 测试部署</h3>
                        <p>功能测试、性能优化和上线部署</p>
                        <small>第9-10周</small>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="fragment">
            <h2>💡 核心特性展示</h2>
            <div class="feature-showcase">
                <div class="feature-card fragment">
                    <span class="feature-icon">⚡</span>
                    <h3>高性能</h3>
                    <p>优化算法和缓存策略</p>
                </div>
                
                <div class="feature-card fragment">
                    <span class="feature-icon">🔒</span>
                    <h3>安全可靠</h3>
                    <p>多层安全防护机制</p>
                </div>
                
                <div class="feature-card fragment">
                    <span class="feature-icon">📱</span>
                    <h3>响应式</h3>
                    <p>适配多种设备屏幕</p>
                </div>
                
                <div class="feature-card fragment">
                    <span class="feature-icon">🌍</span>
                    <h3>国际化</h3>
                    <p>支持多语言和地区</p>
                </div>
            </div>
        </div>
        
        <div class="fragment">
            <h2>📊 性能指标</h2>
            <div class="interactive-chart">
                <div class="chart-bar">
                    <div class="chart-label">响应速度</div>
                    <div class="chart-progress">
                        <div class="chart-fill fragment" style="width: 0%" data-final-width="92%"></div>
                    </div>
                    <div class="chart-value">92%</div>
                </div>
                
                <div class="chart-bar">
                    <div class="chart-label">用户满意度</div>
                    <div class="chart-progress">
                        <div class="chart-fill fragment" style="width: 0%" data-final-width="88%"></div>
                    </div>
                    <div class="chart-value">88%</div>
                </div>
                
                <div class="chart-bar">
                    <div class="chart-label">系统稳定性</div>
                    <div class="chart-progress">
                        <div class="chart-fill fragment" style="width: 0%" data-final-width="95%"></div>
                    </div>
                    <div class="chart-value">95%</div>
                </div>
                
                <div class="chart-bar">
                    <div class="chart-label">代码质量</div>
                    <div class="chart-progress">
                        <div class="chart-fill fragment" style="width: 0%" data-final-width="87%"></div>
                    </div>
                    <div class="chart-value">87%</div>
                </div>
            </div>
        </div>
        
        <div class="fragment">
            <h2>🔄 代码演进过程</h2>
            
            <div class="code-evolution fragment">
                <h4>步骤 1: 基础实现</h4>
                <pre><code>function processData(data) {
    return data.map(item => item.value);
}</code></pre>
            </div>
            
            <div class="code-evolution fragment">
                <h4>步骤 2: 添加验证</h4>
                <pre><code>function processData(data) {
    if (!Array.isArray(data)) {
        throw new Error('Data must be an array');
    }
    return data.map(item => item.value);
}</code></pre>
            </div>
            
            <div class="code-evolution fragment">
                <h4>步骤 3: 错误处理优化</h4>
                <pre><code>function processData(data) {
    if (!Array.isArray(data)) {
        throw new Error('Data must be an array');
    }
    return data
        .filter(item => item && typeof item.value !== 'undefined')
        .map(item => item.value);
}</code></pre>
            </div>
            
            <div class="code-evolution fragment">
                <h4>步骤 4: 性能优化</h4>
                <pre><code>function processData(data) {
    if (!Array.isArray(data)) {
        throw new Error('Data must be an array');
    }
    
    const result = [];
    for (let i = 0; i < data.length; i++) {
        const item = data[i];
        if (item && typeof item.value !== 'undefined') {
            result.push(item.value);
        }
    }
    return result;
}</code></pre>
            </div>
        </div>
    </div>

    <script>
        // 监听Reveal.js fragment事件，实现自定义动画
        document.addEventListener('DOMContentLoaded', function() {
            // 等待Reveal.js加载完成
            setTimeout(() => {
                if (window.Reveal) {
                    Reveal.on('fragmentshown', function(event) {
                        // 处理图表动画
                        if (event.fragment.classList.contains('chart-fill')) {
                            const finalWidth = event.fragment.getAttribute('data-final-width');
                            if (finalWidth) {
                                setTimeout(() => {
                                    event.fragment.style.width = finalWidth;
                                }, 100);
                            }
                        }
                    });
                    
                    Reveal.on('fragmenthidden', function(event) {
                        // 处理图表隐藏
                        if (event.fragment.classList.contains('chart-fill')) {
                            event.fragment.style.width = '0%';
                        }
                    });
                }
            }, 500);
        });
        
        // 为feature cards添加额外的交互效果
        document.querySelectorAll('.feature-card').forEach(card => {
            card.addEventListener('mouseenter', function() {
                this.style.boxShadow = '0 8px 25px rgba(0,0,0,0.15)';
            });
            
            card.addEventListener('mouseleave', function() {
                this.style.boxShadow = '0 4px 6px rgba(0,0,0,0.1)';
            });
        });
    </script>
</body>
</html>
